# Auto Report Dashboard

A polished React dashboard that displays automated reports generated by a backend system. Features interactive charts, PDF preview, flagged posts management, and live report regeneration.

## Features

- **Automated Report Display**: Shows the latest CSV analysis and PDF report
- **Live Report Generation**: Single "Rerun Live" button triggers backend to regenerate reports
- **Interactive Analytics**: Charts for sentiment, nature, topics, timeline, and top words
- **Flagged Posts Management**: Filter and browse dangerous/flagged content
- **PDF Preview**: Embedded PDF viewer with download capabilities
- **Real-time Status**: Shows processing status with auto-refresh
- **Responsive Design**: Works on desktop and mobile devices

## Configuration

### Environment Variables

Create a `.env.local` file in the project root:

```bash
VITE_API_BASE=http://localhost:8000
VITE_API_KEY=your-api-key-here  # Optional
```

### API Configuration

The dashboard expects a backend API with these endpoints:

#### 1. POST /rerun
- Triggers live scraping and report generation
- Response: `{ "status": "ok", "pdf": "/files/report.pdf", "csv": "/files/analysis_output.csv", "docx": "/files/report.docx" }`

#### 2. GET /report
- Returns current report files
- Response: `{ "pdf": "/files/report.pdf", "csv": "/files/analysis_output.csv", "docx": "/files/report.docx", "generated_at": "2025-08-30 12:00:00" }`

#### 3. GET /files/{filename}
- Serves generated files (PDF, CSV, DOCX)
- Must support range requests for PDF preview

### Expected CSV Schema

The CSV should have these columns (case-insensitive):

- `text_for_analysis` - Original text content
- `clean_text` - Processed text for analysis
- `sentiment` - POSITIVE/NEGATIVE/NEUTRAL
- `sentiment_score` - Float 0..1
- `nature` - Classification (pro-india, anti-india, etc.)
- `topic` - Topic ID or category
- `dangerous` - Boolean flag for harmful content
- `created_at` - Date/timestamp
- `score` - Numeric score
- `subreddit`, `username`, `url` - Optional metadata

## Development

### Installation

```bash
npm install
```

### Development Server

```bash
npm run dev
```

### Testing with Sample Data

The dashboard includes a sample CSV file at `/public/sample.csv` for testing. If the backend API is unavailable, the dashboard will automatically load this sample data for demonstration purposes.

### Build

```bash
npm run build
```

## Usage

1. **Initial Load**: Dashboard attempts to load existing reports from the backend
2. **Generate Report**: Click "Rerun Live & Rebuild Report" to trigger new analysis
3. **View Analytics**: Explore charts and click elements to filter flagged posts
4. **Download**: Use download buttons to get PDF and CSV files
5. **Filter Posts**: Use the flagged posts section to browse dangerous content

## Architecture

- **React 18** with TypeScript
- **Tailwind CSS** for styling with custom design system
- **Recharts** for data visualization
- **Papa Parse** for CSV processing
- **Shadcn/ui** components for UI elements
- **React Query** for API state management

## API Integration

The dashboard is designed to work with any backend that implements the required API contract. For development, you can:

1. Set `VITE_API_BASE` to your backend URL
2. Use the sample data for testing without a backend
3. Implement the three required endpoints in your backend system

## Color Scheme

- Primary: #4F81BD (Professional Blue)
- Accent: #F28B82 (Salmon)
- Success: #A2C181 (Sage Green)
- Custom semantic tokens defined in the design system